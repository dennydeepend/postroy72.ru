import $ from"jquery";import{GetYoDigits}from"./foundation.core.utils";import{MediaQuery}from"./foundation.util.mediaQuery";var FOUNDATION_VERSION="6.7.5",Foundation={version:FOUNDATION_VERSION,_plugins:{},_uuids:[],plugin:function(t,i){var i=i||functionName(t),e=hyphenate(i);this._plugins[e]=this[i]=t},registerPlugin:function(t,i){i=i?hyphenate(i):functionName(t.constructor).toLowerCase();t.uuid=GetYoDigits(6,i),t.$element.attr("data-"+i)||t.$element.attr("data-"+i,t.uuid),t.$element.data("zfPlugin")||t.$element.data("zfPlugin",t),t.$element.trigger("init.zf."+i),this._uuids.push(t.uuid)},unregisterPlugin:function(t){var i,e=hyphenate(functionName(t.$element.data("zfPlugin").constructor));for(i in this._uuids.splice(this._uuids.indexOf(t.uuid),1),t.$element.removeAttr("data-"+e).removeData("zfPlugin").trigger("destroyed.zf."+e),t)"function"==typeof t[i]&&(t[i]=null)},reInit:function(t){var i,e=t instanceof $;try{e?t.each(function(){$(this).data("zfPlugin")._init()}):(i=this,{object:function(t){t.forEach(function(t){t=hyphenate(t),$("[data-"+t+"]").foundation("_init")})},string:function(){t=hyphenate(t),$("[data-"+t+"]").foundation("_init")},undefined:function(){this.object(Object.keys(i._plugins))}}[typeof t](t))}catch(t){console.error(t)}finally{return t}},reflow:function(n,t){void 0===t?t=Object.keys(this._plugins):"string"==typeof t&&(t=[t]);var s=this;$.each(t,function(t,i){var e=s._plugins[i];$(n).find("[data-"+i+"]").addBack("[data-"+i+"]").filter(function(){return void 0===$(this).data("zfPlugin")}).each(function(){var t=$(this),i={reflow:!0};t.attr("data-options")&&t.attr("data-options").split(";").forEach(function(t){t=t.split(":").map(function(t){return t.trim()});t[0]&&(i[t[0]]=parseValue(t[1]))});try{t.data("zfPlugin",new e($(this),i))}catch(t){console.error(t)}finally{return}})})},getFnName:functionName,addToJquery:function(){return $.fn.foundation=function(e){var t=typeof e,i=$(".no-js");if(i.length&&i.removeClass("no-js"),"undefined"==t)MediaQuery._init(),Foundation.reflow(this);else{if("string"!=t)throw new TypeError(`We're sorry, ${t} is not a valid parameter. You must use a string representing the method you wish to invoke.`);var n=Array.prototype.slice.call(arguments,1),s=this.data("zfPlugin");if(void 0===s||void 0===s[e])throw new ReferenceError("We're sorry, '"+e+"' is not an available method for "+(s?functionName(s):"this element")+".");1===this.length?s[e].apply(s,n):this.each(function(t,i){s[e].apply($(i).data("zfPlugin"),n)})}return this},$}};function functionName(t){var i;return void 0===Function.prototype.name?(i=/function\s([^(]{1,})\(/.exec(t.toString()))&&1<i.length?i[1].trim():"":(void 0===t.prototype?t:t.prototype).constructor.name}function parseValue(t){return"true"===t||"false"!==t&&(isNaN(+t)?t:parseFloat(t))}function hyphenate(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}Foundation.util={throttle:function(e,n){var s=null;return function(){var t=this,i=arguments;null===s&&(s=setTimeout(function(){e.apply(t,i),s=null},n))}}},window.Foundation=Foundation,function(){Date.now&&window.Date.now||(window.Date.now=Date.now=function(){return(new Date).getTime()});for(var n,t=["webkit","moz"],i=0;i<t.length&&!window.requestAnimationFrame;++i){var e=t[i];window.requestAnimationFrame=window[e+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e+"CancelAnimationFrame"]||window[e+"CancelRequestAnimationFrame"]}!/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)&&window.requestAnimationFrame&&window.cancelAnimationFrame||(n=0,window.requestAnimationFrame=function(t){var i=Date.now(),e=Math.max(n+16,i);return setTimeout(function(){t(n=e)},e-i)},window.cancelAnimationFrame=clearTimeout),window.performance&&window.performance.now||(window.performance={start:Date.now(),now:function(){return Date.now()-this.start}})}(),Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");function i(){return n.apply(this instanceof s?this:t,e.concat(Array.prototype.slice.call(arguments)))}var e=Array.prototype.slice.call(arguments,1),n=this,s=function(){};return this.prototype&&(s.prototype=this.prototype),i.prototype=new s,i});import{GetYoDigits}from"./foundation.core.utils";class Plugin{constructor(t,i){this._setup(t,i);t=getPluginName(this);this.uuid=GetYoDigits(6,t),this.$element.attr("data-"+t)||this.$element.attr("data-"+t,this.uuid),this.$element.data("zfPlugin")||this.$element.data("zfPlugin",this),this.$element.trigger("init.zf."+t)}destroy(){this._destroy();var t,i=getPluginName(this);for(t in this.$element.removeAttr("data-"+i).removeData("zfPlugin").trigger("destroyed.zf."+i),this)this.hasOwnProperty(t)&&(this[t]=null)}}function hyphenate(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function getPluginName(t){return hyphenate(t.className)}import $ from"jquery";function rtl(){return"rtl"===$("html").attr("dir")}function GetYoDigits(i=6,t){let e="";var n="0123456789abcdefghijklmnopqrstuvwxyz",s=n.length;for(let t=0;t<i;t++)e+=n[Math.floor(Math.random()*s)];return t?e+"-"+t:e}function RegExpEscape(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}function transitionend(t){var i,e,n={transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend"},s=document.createElement("div");for(e in n)void 0!==s.style[e]&&(i=n[e]);return i||(setTimeout(function(){t.triggerHandler("transitionend",[t])},1),"transitionend")}function onLoad(t,i){var e="complete"===document.readyState;const n=(e?"_didLoad":"load")+".zf.util.onLoad";var s=()=>t.triggerHandler(n);return t&&(i&&t.one(n,i),e?setTimeout(s):$(window).one("load",s)),n}function ignoreMousedisappear(n,{ignoreLeaveWindow:s=!1,ignoreReappear:o=!1}={}){return function(i,...t){const e=n.bind(this,i,...t);if(null!==i.relatedTarget)return e();setTimeout(function(){if(!s&&document.hasFocus&&!document.hasFocus())return e();o||$(document).one("mouseenter",function(t){$(i.currentTarget).has(t.target).length||(i.relatedTarget=t.target,e())})},0)}}import $ from"jquery";import{Keyboard}from"./foundation.util.keyboard";import{Motion}from"./foundation.util.motion";import{Timer}from"./foundation.util.timer";import{onImagesLoaded}from"./foundation.util.imageLoader";import{GetYoDigits}from"./foundation.core.utils";import{Plugin}from"./foundation.core.plugin";import{Touch}from"./foundation.util.touch";class Orbit extends Plugin{_setup(t,i){this.$element=t,this.options=$.extend({},Orbit.defaults,this.$element.data(),i),this.className="Orbit",Touch.init($),this._init(),Keyboard.register("Orbit",{ltr:{ARROW_RIGHT:"next",ARROW_LEFT:"previous"},rtl:{ARROW_LEFT:"next",ARROW_RIGHT:"previous"}})}_init(){this._reset(),this.$wrapper=this.$element.find("."+this.options.containerClass),this.$slides=this.$element.find("."+this.options.slideClass);var t=this.$element.find("img"),i=this.$slides.filter(".is-active"),e=this.$element[0].id||GetYoDigits(6,"orbit");this.$element.attr({"data-resize":e,id:e}),i.length||this.$slides.eq(0).addClass("is-active"),this.options.useMUI||this.$slides.addClass("no-motionui"),t.length?onImagesLoaded(t,this._prepareForOrbit.bind(this)):this._prepareForOrbit(),this.options.bullets&&this._loadBullets(),this._events(),this.options.autoPlay&&1<this.$slides.length&&this.geoSync(),this.options.accessible&&this.$wrapper.attr("tabindex",0)}_loadBullets(){this.$bullets=this.$element.find("."+this.options.boxOfBullets).find("button")}geoSync(){var t=this;this.timer=new Timer(this.$element,{duration:this.options.timerDelay,infinite:!1},function(){t.changeSlide(!0)}),this.timer.start()}_prepareForOrbit(){this._setWrapperHeight()}_setWrapperHeight(t){var i,e=0,n=0,s=this;this.$slides.each(function(){i=this.getBoundingClientRect().height,$(this).attr("data-slide",n),/mui/g.test($(this)[0].className)||s.$slides.filter(".is-active")[0]===s.$slides.eq(n)[0]||$(this).css({display:"none"}),e=e<i?i:e,n++}),n===this.$slides.length&&(this.$wrapper.css({height:e}),t)&&t(e)}_setSlideHeight(t){this.$slides.each(function(){$(this).css("max-height",t)})}_events(){var n=this;this.$element.off(".resizeme.zf.trigger").on({"resizeme.zf.trigger":this._prepareForOrbit.bind(this)}),1<this.$slides.length&&(this.options.swipe&&this.$slides.off("swipeleft.zf.orbit swiperight.zf.orbit").on("swipeleft.zf.orbit",function(t){t.preventDefault(),n.changeSlide(!0)}).on("swiperight.zf.orbit",function(t){t.preventDefault(),n.changeSlide(!1)}),this.options.autoPlay&&(this.$slides.on("click.zf.orbit",function(){n.$element.data("clickedOn",!n.$element.data("clickedOn")),n.timer[n.$element.data("clickedOn")?"pause":"start"]()}),this.options.pauseOnHover)&&this.$element.on("mouseenter.zf.orbit",function(){n.timer.pause()}).on("mouseleave.zf.orbit",function(){n.$element.data("clickedOn")||n.timer.start()}),this.options.navButtons&&this.$element.find(`.${this.options.nextClass}, .`+this.options.prevClass).attr("tabindex",0).on("click.zf.orbit touchend.zf.orbit",function(t){t.preventDefault(),n.changeSlide($(this).hasClass(n.options.nextClass))}),this.options.bullets&&this.$bullets.on("click.zf.orbit touchend.zf.orbit",function(){if(/is-active/g.test(this.className))return!1;var t=$(this).data("slide"),i=t>n.$slides.filter(".is-active").data("slide"),e=n.$slides.eq(t);n.changeSlide(i,e,t)}),this.options.accessible)&&this.$wrapper.add(this.$bullets).on("keydown.zf.orbit",function(t){Keyboard.handleKey(t,"Orbit",{next:function(){n.changeSlide(!0)},previous:function(){n.changeSlide(!1)},handled:function(){$(t.target).is(n.$bullets)&&n.$bullets.filter(".is-active").focus()}})})}_reset(){void 0!==this.$slides&&1<this.$slides.length&&(this.$element.off(".zf.orbit").find("*").off(".zf.orbit"),this.options.autoPlay&&this.timer.restart(),this.$slides.each(function(t){$(t).removeClass("is-active is-active is-in").removeAttr("aria-live").hide()}),this.$slides.first().addClass("is-active").show(),this.$element.trigger("slidechange.zf.orbit",[this.$slides.first()]),this.options.bullets)&&this._updateBullets(0)}changeSlide(t,i,e){if(this.$slides){var n=this.$slides.filter(".is-active").eq(0);if(/mui/g.test(n[0].className))return!1;var s=this.$slides.first(),o=this.$slides.last(),r=t?"Right":"Left",a=t?"Left":"Right",l=this,u=i||(t?!this.options.infiniteWrap||n.next("."+this.options.slideClass).length?n.next("."+this.options.slideClass):s:!this.options.infiniteWrap||n.prev("."+this.options.slideClass).length?n.prev("."+this.options.slideClass):o);u.length&&(this.$element.trigger("beforeslidechange.zf.orbit",[n,u]),this.options.bullets&&(e=e||this.$slides.index(u),this._updateBullets(e)),this.options.useMUI&&!this.$element.is(":hidden")?(Motion.animateIn(u.addClass("is-active"),this.options["animInFrom"+r],function(){u.css({display:"block"}).attr("aria-live","polite")}),Motion.animateOut(n.removeClass("is-active"),this.options["animOutTo"+a],function(){n.removeAttr("aria-live"),l.options.autoPlay&&!l.timer.isPaused&&l.timer.restart()})):(n.removeClass("is-active is-in").removeAttr("aria-live").hide(),u.addClass("is-active is-in").attr("aria-live","polite").show(),this.options.autoPlay&&!this.timer.isPaused&&this.timer.restart()),this.$element.trigger("slidechange.zf.orbit",[u]))}}_updateBullets(t){var i,e=this.$bullets.filter(".is-active"),n=this.$bullets.not(".is-active"),t=this.$bullets.eq(t),s=(e.removeClass("is-active").blur(),t.addClass("is-active"),e.children("[data-slide-active-label]").last());s.length||(i=e.children("span"),n.toArray().map(t=>$(t).children("span").length).every(t=>t<i.length)&&(s=i.last()).attr("data-slide-active-label","")),s.length&&(s.detach(),t.append(s))}_destroy(){this.$element.off(".zf.orbit").find("*").off(".zf.orbit").end().hide()}}Orbit.defaults={bullets:!0,navButtons:!0,animInFromRight:"slide-in-right",animOutToRight:"slide-out-right",animInFromLeft:"slide-in-left",animOutToLeft:"slide-out-left",autoPlay:!0,timerDelay:5e3,infiniteWrap:!0,swipe:!0,pauseOnHover:!0,accessible:!0,containerClass:"orbit-container",slideClass:"orbit-slide",boxOfBullets:"orbit-bullets",nextClass:"orbit-next",prevClass:"orbit-previous",useMUI:!0};export{Foundation,Plugin,rtl,GetYoDigits,RegExpEscape,transitionend,onLoad,ignoreMousedisappear,Orbit};